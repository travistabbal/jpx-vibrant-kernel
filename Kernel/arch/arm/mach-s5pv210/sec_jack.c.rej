--- arch/arm/mach-s5pv210/sec_jack.c	2010-12-20 12:09:08.000000000 +0800
+++ arch/arm/mach-s5pv210/sec_jack.c	2010-12-31 06:14:54.000000000 +0800
@@ -195,7 +195,11 @@
 					if(!get_recording_status())
 					{
 					#if !defined(CONFIG_ARIES_NTT)
-						gpio_set_value(GPIO_MICBIAS_EN, 0);
+#if defined(CONFIG_GALAXY_I897)
+						gpio_set_value(GPIO_TV_EN, 0);
+#else
+                                                gpio_set_value(GPIO_MICBIAS_EN, 0);
+#endif
 					#elif defined(CONFIG_ARIES_NTT)
 						gpio_set_value(GPIO_SUB_MICBIAS_EN, 0);
 					#endif
@@ -212,7 +216,11 @@
 			}
 			/* 4 pole zone */
 #if !defined(CONFIG_ARIES_NTT)
+#if defined(CONFIG_GALAXY_I897)
+			else if(adc > 700 && adc < 2500)
+#else
 			else if(adc > 900)
+#endif
 #else				
 			else if(adc > 500 || (adc <= 3600 && adc >= 3400)) //ssong100911. 공정 테스트모드에서 EAR Loopback Fail 문제.
 #endif				
@@ -226,7 +234,11 @@
 					send_end_irq_token=1;
 				}
 			#if !defined(CONFIG_ARIES_NTT)
-				gpio_set_value(GPIO_MICBIAS_EN, 1);
+#if defined(CONFIG_GALAXY_I897)
+				gpio_set_value(GPIO_TV_EN, 1);
+#else
+                                gpio_set_value(GPIO_MICBIAS_EN, 1);
+#endif
 			#elif defined(CONFIG_ARIES_NTT)
 				gpio_set_value(GPIO_SUB_MICBIAS_EN, 1);
 			#endif
@@ -256,7 +268,11 @@
 					if(!get_recording_status())
 					{
 					#if !defined(CONFIG_ARIES_NTT)
+#if defined(CONFIG_GALAXY_I897)
+						gpio_set_value(GPIO_TV_EN, 0);
+#else
 						gpio_set_value(GPIO_MICBIAS_EN, 0);
+#endif
 					#elif defined(CONFIG_ARIES_NTT)
 						gpio_set_value(GPIO_SUB_MICBIAS_EN, 0);
 					#endif						
@@ -288,7 +304,11 @@
 					if(!get_recording_status())
 					{
 					#if !defined(CONFIG_ARIES_NTT)
+#if defined(CONFIG_GALAXY_I897)
+						gpio_set_value(GPIO_TV_EN, 0);
+#else
 						gpio_set_value(GPIO_MICBIAS_EN, 0);
+#endif
 					#elif defined(CONFIG_ARIES_NTT)
 						gpio_set_value(GPIO_SUB_MICBIAS_EN, 0);
 #endif
@@ -322,7 +342,11 @@
 			if(!get_recording_status())
 			{
 			#if !defined(CONFIG_ARIES_NTT)
+#if defined(CONFIG_GALAXY_I897)
+				gpio_set_value(GPIO_TV_EN, 0);
+#else
 				gpio_set_value(GPIO_MICBIAS_EN, 0);
+#endif
 			#elif defined(CONFIG_ARIES_NTT)
 				gpio_set_value(GPIO_SUB_MICBIAS_EN,0);
 #endif
@@ -363,7 +387,11 @@
 	if(state)
 	{
 #if !defined(CONFIG_ARIES_NTT)
+#if defined(CONFIG_GALAXY_I897)
+		gpio_set_value(GPIO_TV_EN, 1);
+#else
 		gpio_set_value(GPIO_MICBIAS_EN, 1);
+#endif
 	#elif defined(CONFIG_ARIES_NTT)
 		gpio_set_value(GPIO_SUB_MICBIAS_EN, 1);
 #endif
@@ -398,7 +426,11 @@
         if(!get_recording_status())
         {
 	#if !defined(CONFIG_ARIES_NTT)
+#if defined(CONFIG_GALAXY_I897)
+              gpio_set_value(GPIO_TV_EN, 0);
+#else
               gpio_set_value(GPIO_MICBIAS_EN, 0);
+#endif
 	#elif defined(CONFIG_ARIES_NTT)
 		gpio_set_value(GPIO_SUB_MICBIAS_EN, 0);
 #endif
@@ -532,7 +564,11 @@
 			if(!get_recording_status())
 			{
 			#if !defined(CONFIG_ARIES_NTT)
+#if defined(CONFIG_GALAXY_I897)
+				gpio_set_value(GPIO_TV_EN, 0);
+#else
 				gpio_set_value(GPIO_MICBIAS_EN, 0);
+#endif
 			#elif defined(CONFIG_ARIES_NTT)
 				gpio_set_value(GPIO_SUB_MICBIAS_EN, 0);
 #endif
@@ -544,7 +580,11 @@
 		case SEC_HEADSET_4_POLE_DEVICE:
 		{
 		#if !defined(CONFIG_ARIES_NTT)
+#if defined(CONFIG_GALAXY_I897)
+			gpio_set_value(GPIO_TV_EN, 1);
+#else
 			gpio_set_value(GPIO_MICBIAS_EN, 1);
+#endif
 		#elif defined(CONFIG_ARIES_NTT)
 			gpio_set_value(GPIO_SUB_MICBIAS_EN, 1);
 #endif
@@ -569,7 +609,11 @@
 			if(!get_recording_status())
 			{
 			#if !defined(CONFIG_ARIES_NTT)
+#if defined(CONFIG_GALAXY_I897)
+				gpio_set_value(GPIO_TV_EN,0);
+#else
 				gpio_set_value(GPIO_MICBIAS_EN,0);
+#endif
 			#elif defined(CONFIG_ARIES_NTT)
 				gpio_set_value(GPIO_SUB_MICBIAS_EN, 0);
 #endif
@@ -688,7 +732,9 @@
 	s3c_gpio_setpull(det_jack->gpio, S3C_GPIO_PULL_NONE);
 	set_irq_type(det_jack->eint, IRQ_TYPE_EDGE_BOTH);
 
-	det_jack->low_active = 1; 
+#if !defined(CONFIG_GALAXY_I897)
+	det_jack->low_active = 1;
+#endif 
 
 	ret = request_irq(det_jack->eint, detect_irq_handler, IRQF_DISABLED, "sec_headset_detect", NULL);
 
@@ -708,14 +754,24 @@
 	}
 	s3c_gpio_slp_cfgpin(GPIO_EARPATH_SEL, S3C_GPIO_SLP_PREV);
 #if !defined(CONFIG_ARIES_NTT)
-	if(gpio_is_valid(GPIO_MICBIAS_EN))
+#if defined(CONFIG_GALAXY_I897)
+	if(gpio_is_valid(GPIO_TV_EN))
 		{
-			if(gpio_request(GPIO_MICBIAS_EN, "GPJ4[2]"))
-				printk(KERN_ERR "Failed to request GPIO_MICBIAS_EN!\n");
-			gpio_direction_output(GPIO_MICBIAS_EN,0);
+			if(gpio_request(GPIO_TV_EN, "GPJ4[4]"))
+				printk(KERN_ERR "Failed to request GPIO_TV_EN!\n");
+			gpio_direction_output(GPIO_TV_EN,0);
 		}
 
-	s3c_gpio_slp_cfgpin(GPIO_MICBIAS_EN, S3C_GPIO_SLP_PREV); 
+	s3c_gpio_slp_cfgpin(GPIO_TV_EN, S3C_GPIO_SLP_PREV); 
+#endif
+        if(gpio_is_valid(GPIO_MICBIAS_EN))
+        {
+                if(gpio_request(GPIO_MICBIAS_EN, "GPJ4[2]"))
+                        printk(KERN_ERR "Failed to request GPIO_MICBIAS_EN!\n");
+
+                gpio_direction_output(GPIO_MICBIAS_EN,0);
+        }
+        s3c_gpio_slp_cfgpin(GPIO_MICBIAS_EN, S3C_GPIO_SLP_PREV);
 
 #elif defined(CONFIG_ARIES_NTT)// Modify NTTS1
 	if(gpio_is_valid(GPIO_MICBIAS_EN))
@@ -777,7 +833,11 @@
         if(!get_recording_status())
         {
 		#if !defined(CONFIG_ARIES_NTT)
+#if defined(CONFIG_GALAXY_I897)
+			gpio_set_value(GPIO_TV_EN, 0);
+#else
 			gpio_set_value(GPIO_MICBIAS_EN, 0);
+#endif
 		#elif defined(CONFIG_ARIES_NTT)
 			gpio_set_value(GPIO_SUB_MICBIAS_EN, 0);
 #endif
